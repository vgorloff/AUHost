* Refactoring and cleanup.
* Xcode 9 beta 3 compatibility update.