options:
  deploymentTarget:
    macOS: "10.11"
  settingPresets: none
  createIntermediateGroups: true
  usesTabs: false
  indentWidth: 3
  tabWidth: 3

attributes:
   ORGANIZATIONNAME: WaveLabs
   LastUpgradeCheck: "1000"
   
configFiles:
   Debug: Configuration/Project.xcconfig
   Release: Configuration/Project.xcconfig

name: Attenuator

targets:
       
  AUHost:
    type: application
    platform: macOS
    settings:
      INFOPLIST_FILE: SampleAUHost/Info.plist
      PRODUCT_BUNDLE_IDENTIFIER: ua.com.wavelabs.AUHost
      CODE_SIGN_ENTITLEMENTS: SampleAUHost/App.entitlements
      CODE_SIGN_IDENTITY: Mac Developer
      CODE_SIGN_STYLE: Automatic
      DEVELOPMENT_TEAM: E27KE6VTF6
      DEPLOYMENT_LOCATION: YES
    configFiles:
       Debug: Vendor/WL/Shared/Configuration/App-macOS.xcconfig
       Release: Vendor/WL/Shared/Configuration/App-macOS.xcconfig
    prebuildScripts:
       - script: '[[ -r ~/.bashrc ]] && . ~/.bashrc && ruby -r "`pwd`/Automation.rb" -e "Automation.verifyHost"'
         name: "Run Script: Verify"
         shell: /bin/bash
    sources:
       - SampleAUHost
       - Shared
    dependencies:
       - target: mcBase
       
  Attenuator:
    type: application
    platform: macOS
    settings:
      INFOPLIST_FILE: SampleAUPlugin/Attenuator/Info.plist
      PRODUCT_BUNDLE_IDENTIFIER: ua.com.wavelabs.Attenuator
      CODE_SIGN_ENTITLEMENTS: SampleAUPlugin/Attenuator/App.entitlements
      CODE_SIGN_IDENTITY: Mac Developer
      CODE_SIGN_STYLE: Automatic
      DEVELOPMENT_TEAM: E27KE6VTF6
      DEPLOYMENT_LOCATION: YES
    configFiles:
       Debug: Vendor/WL/Shared/Configuration/App-macOS.xcconfig
       Release: Vendor/WL/Shared/Configuration/App-macOS.xcconfig
    postbuildScripts:
       - script: '[[ -r ~/.bashrc ]] && . ~/.bashrc && ruby -r "`pwd`/Automation.rb" -e "Automation.post"'
         name: "Run Script: Post-Build"
         shell: /bin/bash
    sources:
       - SampleAUPlugin/Attenuator
       - Shared
    dependencies:
       - target: AttenuatorKit
       - target: AttenuatorAU
       - target: mcBase

  AttenuatorAU:
    type: app-extension
    platform: macOS
    settings:
      INFOPLIST_FILE: SampleAUPlugin/AttenuatorAU/Info.plist
      PRODUCT_BUNDLE_IDENTIFIER: ua.com.wavelabs.Attenuator.AttenuatorAU
      CODE_SIGN_ENTITLEMENTS: SampleAUPlugin/AttenuatorAU/Extension.entitlements
      CODE_SIGN_IDENTITY: Mac Developer
      CODE_SIGN_STYLE: Automatic
      DEVELOPMENT_TEAM: E27KE6VTF6
      # LD_RUNPATH_SEARCH_PATHS: $(inherited) @executable_path/../../../../Frameworks
      ALWAYS_EMBED_SWIFT_STANDARD_LIBRARIES: YES
    configFiles:
       Debug: Vendor/WL/Shared/Configuration/Framework-macOS.xcconfig
       Release: Vendor/WL/Shared/Configuration/Framework-macOS.xcconfig
    sources:
       - SampleAUPlugin/AttenuatorAU
    dependencies:
       - target: AttenuatorKit
         embed: true
       - target: mcBase
         embed: true
       
  AttenuatorKit:
    type: framework
    platform: macOS
    settings:
      INFOPLIST_FILE: SampleAUPlugin/AttenuatorKit/Info.plist
      PRODUCT_BUNDLE_IDENTIFIER: ua.com.wavelabs.AttenuatorKit
      APPLICATION_EXTENSION_API_ONLY: YES
      LD_RUNPATH_SEARCH_PATHS: $(inherited) @executable_path/Frameworks @loader_path/Frameworks
      ALWAYS_EMBED_SWIFT_STANDARD_LIBRARIES: YES
      CODE_SIGN_IDENTITY: Mac Developer
      CODE_SIGN_STYLE: Automatic
      DEVELOPMENT_TEAM: E27KE6VTF6
    configFiles:
       Debug: Vendor/WL/Shared/Configuration/Framework-macOS.xcconfig
       Release: Vendor/WL/Shared/Configuration/Framework-macOS.xcconfig
    prebuildScripts:
       - script: '[[ -r ~/.bashrc ]] && . ~/.bashrc && ruby -r "`pwd`/Automation.rb" -e "Automation.verifyPlugIn"'
         name: "Run Script: Verify"
         shell: /bin/bash
    sources:
       - SampleAUPlugin/AttenuatorKit
    dependencies:
       - target: mcBase
         embed: true
       
  mcBase:
    type: framework
    platform: macOS
    settings:
      INFOPLIST_FILE: SampleAUPlugin/AttenuatorKit/Info.plist
      PRODUCT_BUNDLE_IDENTIFIER: ua.com.wavelabs.Base
      APPLICATION_EXTENSION_API_ONLY: YES
      LD_RUNPATH_SEARCH_PATHS: $(inherited) @executable_path/Frameworks @loader_path/Frameworks
      CODE_SIGN_IDENTITY: Mac Developer
      CODE_SIGN_STYLE: Automatic
      DEVELOPMENT_TEAM: E27KE6VTF6
    configFiles:
       Debug: Vendor/WL/Shared/Configuration/Framework-macOS.xcconfig
       Release: Vendor/WL/Shared/Configuration/Framework-macOS.xcconfig
    sources:
       - Vendor/WL/Core
       - Vendor/WL/Foundation
       - Vendor/WL/Media
       - Vendor/WL/Types
       - Vendor/WL/AppKit
       - Vendor/Logger.swift
       
schemes:
       
   AUHost:
     build:
       targets:
         AUHost: [run, archive]
         
   Attenuator:
     build:
       targets:
         Attenuator: [run, archive]

